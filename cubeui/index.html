---
layout: wiki
title: CubeUI Documentation
permalink: /cubeui/
---

<div id="cubeui-docs">
    <section id="install" class="doc-section">
        {% lang en %}<h1>Installation</h1>{% endlang %}
        {% lang ru %}<h1>Установка</h1>{% endlang %}
        
        {% lang en %}<p>Latest version is detected automatically from CurseForge.</p>{% endlang %}
        {% lang ru %}<p>Последняя версия определяется автоматически с CurseForge.</p>{% endlang %}
        
        <div style="background:var(--bg-panel); padding:20px; border:1px solid var(--border); border-radius:6px; margin-bottom:30px;">
            <div style="display:flex; gap:10px; margin-bottom:10px; flex-wrap:wrap;">
                <select id="loader-select" class="form-select" style="width:150px;" onchange="fetchLatestVersion()">
                    <option value="Forge">Forge</option>
                    <option value="Fabric">Fabric</option>
                    <option value="NeoForge">NeoForge</option>
                </select>
                <div id="version-status" style="display:flex; align-items:center; font-size:0.9rem; color:var(--text-muted);">
                    <i class="fa-solid fa-circle-notch fa-spin" style="margin-right:8px;"></i> Checking API...
                </div>
            </div>
            <div class="code-container result-group" style="margin:0;">
                <div class="code-head">build.gradle</div>
                <pre id="gradle-output">// Waiting for API...</pre>
            </div>
        </div>
    </section>

    <section id="theme" class="doc-section">
        {% lang en %}<h1>Theming</h1>{% endlang %}
        {% lang ru %}<h1>Темизация</h1>{% endlang %}
        <p>CubeUI uses <code>ThemeManager</code>. Default theme: <strong>Perfectly Vanilla</strong>.</p>
    </section>
</div>

<script>
    const PROJECT_ID = 1415948; 
    let cachedFiles = [];

    async function fetchLatestVersion() {
        const loader = document.getElementById('loader-select').value;
        const status = document.getElementById('version-status');
        const out = document.getElementById('gradle-output');

        if(cachedFiles.length === 0) {
            try {
                // Используем прокси, так как напрямую CurseForge API блочит CORS
                const req = await fetch(`https://api.cfwidget.com/${PROJECT_ID}`);
                const data = await req.json();
                cachedFiles = data.files;
            } catch(e) {
                status.innerHTML = `<span style="color:#d73a49">API Error</span>`;
                return;
            }
        }

        // Умный поиск: ищем файл, у которого в версиях есть название лоадера
        const file = cachedFiles.find(f => f.versions.some(v => v.toLowerCase().includes(loader.toLowerCase())));
        
        if(file) {
            status.innerHTML = `<span style="color:#238636"><i class="fa-solid fa-check"></i> Found: ${file.display_name}</span>`;
            
            if(loader === 'Forge' || loader === 'NeoForge') {
                out.textContent = `dependencies {\n    implementation fg.deobf("curse.maven:cubeui-${PROJECT_ID}:${file.id}")\n}`;
            } else {
                out.textContent = `dependencies {\n    modImplementation "curse.maven:cubeui-${PROJECT_ID}:${file.id}"\n}`;
            }
        } else {
            status.innerHTML = `<span style="color:#d9a51d">No file found for ${loader}</span>`;
            out.textContent = `// No specific file found for ${loader} in recent uploads`;
        }
    }
    document.addEventListener('DOMContentLoaded', fetchLatestVersion);
</script>
