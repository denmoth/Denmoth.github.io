---
layout: default
title: Profile
permalink: /profile/
---

<div class="hub-layout" style="max-width:800px; margin:0 auto;">
    <div id="profile-loading" style="text-align:center; padding:50px;">
        <i class="fa-solid fa-circle-notch fa-spin fa-2x"></i>
    </div>

    <div id="profile-content" style="display:none;">
        <div class="profile-header">
            <img id="p-avatar" class="profile-avatar-xl" src="">
            <div class="profile-info">
                <h1 id="p-name">User</h1>
                <p id="p-email" style="color:var(--text-muted);">email@example.com</p>
                <div style="margin-top:10px;">
                    <span class="badge" style="background:#238636; color:white; border:none; padding:4px 8px; font-size:0.8rem;">
                        {% lang en %}User{% endlang %}{% lang ru %}Пользователь{% endlang %}
                    </span>
                </div>
            </div>
        </div>

        <div class="profile-tabs">
            <button class="profile-tab active" onclick="switchTab('settings')">{% lang en %}Settings{% endlang %}{% lang ru %}Настройки{% endlang %}</button>
            <button class="profile-tab" onclick="switchTab('security')">{% lang en %}Security{% endlang %}{% lang ru %}Безопасность{% endlang %}</button>
        </div>

        <div id="tab-settings" class="settings-section active">
            <div class="settings-card">
                <h3>{% lang en %}Preferences{% endlang %}{% lang ru %}Предпочтения{% endlang %}</h3>
                
                <div class="settings-row">
                    <div>
                        <div style="font-weight:600;">{% lang en %}Language{% endlang %}{% lang ru %}Язык{% endlang %}</div>
                        <div style="font-size:0.85rem; color:var(--text-muted);">{% lang en %}Interface language{% endlang %}{% lang ru %}Язык интерфейса{% endlang %}</div>
                    </div>
                    <select class="form-select" style="width:120px;" onchange="window.location.href = this.value === 'ru' ? '/ru/profile/' : '/profile/'">
                        <option value="en" {% if site.active_lang == 'en' %}selected{% endif %}>English</option>
                        <option value="ru" {% if site.active_lang == 'ru' %}selected{% endif %}>Русский</option>
                    </select>
                </div>

                <div class="settings-row">
                    <div>
                        <div style="font-weight:600;">{% lang en %}Email Notifications{% endlang %}{% lang ru %}Уведомления{% endlang %}</div>
                        <div style="font-size:0.85rem; color:var(--text-muted);">{% lang en %}Receive updates about tools{% endlang %}{% lang ru %}Получать новости об инструментах{% endlang %}</div>
                    </div>
                    <input type="checkbox" checked style="transform:scale(1.2);">
                </div>
            </div>
        </div>

        <div id="tab-security" class="settings-section">
            <div class="settings-card">
                <h3>{% lang en %}Connected Accounts{% endlang %}{% lang ru %}Подключенные аккаунты{% endlang %}</h3>
                <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">{% lang en %}Manage your login methods.{% endlang %}{% lang ru %}Управление способами входа.{% endlang %}</p>
                
                <div class="settings-row">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <i class="fa-brands fa-github" style="font-size:1.2rem;"></i> <span>GitHub</span>
                    </div>
                    <button class="btn" style="font-size:0.8rem; padding:4px 10px;">{% lang en %}Connect{% endlang %}{% lang ru %}Подключить{% endlang %}</button>
                </div>
                
                <div class="settings-row">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <i class="fa-brands fa-discord" style="font-size:1.2rem; color:#5865F2;"></i> <span>Discord</span>
                    </div>
                    <button class="btn" style="font-size:0.8rem; padding:4px 10px;">{% lang en %}Connect{% endlang %}{% lang ru %}Подключить{% endlang %}</button>
                </div>
            </div>

            <div class="settings-card" style="border-color:#d73a49;">
                <h3 style="color:#d73a49;">{% lang en %}Danger Zone{% endlang %}{% lang ru %}Опасная зона{% endlang %}</h3>
                <button onclick="supabase.auth.signOut().then(() => window.location.href = '/')" class="btn" style="width:100%; border-color:#d73a49; color:#d73a49; margin-top:15px;">
                    <i class="fa-solid fa-right-from-bracket"></i> {% lang en %}Log Out{% endlang %}{% lang ru %}Выйти из аккаунта{% endlang %}
                </button>
            </div>
        </div>
    </div>
    
    <div id="guest-view" style="display:none; text-align:center; padding:80px 20px;">
        <i class="fa-solid fa-user-lock" style="font-size:4rem; color:var(--text-muted); margin-bottom:20px;"></i>
        <h2>{% lang en %}Authentication Required{% endlang %}{% lang ru %}Требуется вход{% endlang %}</h2>
        <p style="margin-bottom:30px; color:var(--text-muted);">{% lang en %}Please log in to manage your profile settings.{% endlang %}{% lang ru %}Пожалуйста, войдите, чтобы управлять настройками профиля.{% endlang %}</p>
        <button onclick="openAuthModal()" class="btn primary" style="padding:12px 30px; font-size:1.1rem;">
            {% lang en %}Log In / Sign Up{% endlang %}{% lang ru %}Войти / Регистрация{% endlang %}
        </button>
    </div>
</div>

<script>
    function switchTab(tabName) {
        document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
        
        event.target.classList.add('active');
        document.getElementById('tab-' + tabName).classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', async () => {
        // Wait for main.js to init supabase
        setTimeout(async () => {
            const { data: { session } } = await supabase.auth.getSession();
            document.getElementById('profile-loading').style.display = 'none';
            
            if(session) {
                document.getElementById('profile-content').style.display = 'block';
                const user = session.user;
                document.getElementById('p-avatar').src = user.user_metadata.avatar_url || 'https://www.gravatar.com/avatar/?d=mp';
                document.getElementById('p-name').textContent = user.user_metadata.full_name || user.email.split('@')[0];
                document.getElementById('p-email').textContent = user.email;
            } else {
                document.getElementById('guest-view').style.display = 'block';
            }
        }, 500);
    });
</script>
